OASISFormat: 0.3
Name:        ffi
Version:     0.1
Synopsis:    Manipulate external buffers as C-like structs
Authors:     Jeremy Yallop
License:     MIT
Plugins:     META (0.3)
BuildTools:  ocamlbuild
PostConfCommand: ocaml discover.ml -ocamlc $ocamlc -ext-obj $ext_obj -exec-name $default_executable_name

Library ffi
  Path:             src/
  Findlibname:      ffi
  Modules:          Ffi,PosixTypes
  InternalModules:  Unsigned,Signed,Ffi_raw,Dl
  CSources:         unsigned_stubs.h,unsigned_stubs.c,managed_buffer_stubs.h,managed_buffer_stubs.c,type_info_stubs.h,type_info_stubs.c,ffi_stubs.c,dl_stubs.c,posix_types_stubs.c
  CCOpt:            -fPIC -Wall -Wno-unused-variable -g
#  ByteOpt:          -warn-error A

Library fts
  Path:             examples/fts
  Findlibname:      fts
  Modules:          Fts
  BuildDepends:     ffi

Library sigset
  Path:             examples/sigset
  Findlibname:      sigset
  Modules:          Sigset
  BuildDepends:     ffi

Library ncurses
  Path:             examples/ncurses
  Findlibname:      ncurses
  Modules:          Ncurses
  BuildDepends:     ffi
  CCLib:            -lncurses

Executable ncurses_cmd
   Path:            examples/ncurses
   MainIs:          ncurses_cmd.ml
   CompiledObject:  best
   Install:         false
   BuildDepends:    unix,ncurses
   Custom:          true

Executable test_ffi_raw
  Path:             tests
  MainIs:           test_raw.ml
  Build$:           flag(tests)
  CompiledObject:   best
  Install:          false
  BuildDepends:     unix,ffi,oUnit
  Custom:           true

Executable test_ffi_pointers
  Path:             tests
  MainIs:           test_pointers.ml
  Build$:           flag(tests)
  CompiledObject:   best
  Install:          false
  BuildDepends:     unix,ffi,oUnit
  Custom:           true

Executable test_ffi_higher_order
  Path:             tests
  MainIs:           test_higher_order.ml
  Build$:           flag(tests)
  CompiledObject:   best
  Install:          false
  BuildDepends:     unix,ffi,oUnit
  Custom:           true

Executable test_ffi_structs
  Path:             tests
  MainIs:           test_structs.ml
  Build$:           flag(tests)
  CompiledObject:   best
  Install:          false
  BuildDepends:     unix,ffi,oUnit
  Custom:           true

Executable test_ffi_cstdlib
  Path:             tests
  MainIs:           test_cstdlib.ml
  Build$:           flag(tests)
  CompiledObject:   best
  Install:          false
  BuildDepends:     unix,ffi,oUnit
  Custom:           true

Executable test_ffi_sizeof
  Path:             tests
  MainIs:           test_sizeof.ml
  Build$:           flag(tests)
  CompiledObject:   best
  Install:          false
  BuildDepends:     unix,ffi,oUnit
  Custom:           true

Executable test_ffi_unions
  Path:             tests
  MainIs:           test_unions.ml
  Build$:           flag(tests)
  CompiledObject:   best
  Install:          false
  BuildDepends:     unix,ffi,oUnit
  Custom:           true

Executable test_ffi_custom_ops
  Path:             tests
  MainIs:           test_custom_ops.ml
  Build$:           flag(tests)
  CompiledObject:   best
  Install:          false
  BuildDepends:     unix,ffi,oUnit
  Custom:           true

Executable test_ffi_arrays
  Path:             tests
  MainIs:           test_array.ml
  Build$:           flag(tests)
  CompiledObject:   best
  Install:          false
  BuildDepends:     unix,ffi,oUnit
  Custom:           true

Executable test_ffi_errno
  Path:             tests
  MainIs:           test_errno.ml
  Build$:           flag(tests)
  CompiledObject:   best
  Install:          false
  BuildDepends:     unix,ffi,oUnit
  Custom:           true

Executable test_ffi_passable
  Path:             tests
  MainIs:           test_passable.ml
  Build$:           flag(tests)
  CompiledObject:   best
  Install:          false
  BuildDepends:     unix,ffi,oUnit
  Custom:           true

Executable test_ffi_alignment
  Path:             tests
  MainIs:           test_alignment.ml
  Build$:           flag(tests)
  CompiledObject:   best
  Install:          false
  BuildDepends:     unix,ffi,oUnit
  Custom:           true

Executable date_example
  Path:             examples/date
  MainIs:           date.ml
  CompiledObject:   best
  Install:          false
  BuildDepends:     unix,ffi,oUnit
  Custom:           true

# Executable struct_subtyping
#   Path:             examples/struct-subtyping
#   MainIs:           struct_subtyping.ml
#   CompiledObject:   best
#   Install:          false
#   BuildDepends:     unix,ffi,oUnit
#   Custom:           true

Test test_ffi_raw
  Run$:             flag(tests)
  Command:          $test_ffi_raw
  WorkingDirectory: tests

Test test_ffi_pointers
  Run$:             flag(tests)
  Command:          $test_ffi_pointers
  WorkingDirectory: tests

Test test_ffi_higher_order
  Run$:             flag(tests)
  Command:          $test_ffi_higher_order
  WorkingDirectory: tests

Test test_ffi_structs
  Run$:             flag(tests)
  Command:          $test_ffi_structs
  WorkingDirectory: tests

Test test_ffi_cstdlib
  Run$:             flag(tests)
  Command:          $test_ffi_cstdlib
  WorkingDirectory: tests

Test test_ffi_sizeof
  Run$:             flag(tests)
  Command:          $test_ffi_sizeof
  WorkingDirectory: tests

Test test_ffi_arrays
  Run$:             flag(tests)
  Command:          $test_ffi_arrays
  WorkingDirectory: tests

Test test_ffi_unions
  Run$:             flag(tests)
  Command:          $test_ffi_unions
  WorkingDirectory: tests

Test test_ffi_custom_ops
  Run$:             flag(tests)
  Command:          $test_ffi_custom_ops
  WorkingDirectory: tests

Test test_ffi_errno
  Run$:             flag(tests)
  Command:          $test_ffi_errno
  WorkingDirectory: tests

Test test_passable
  Run$:             flag(tests)
  Command:          $test_ffi_passable
  WorkingDirectory: tests

Test test_alignment
  Run$:             flag(tests)
  Command:          $test_ffi_alignment
  WorkingDirectory: tests
